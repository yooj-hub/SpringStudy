# 변경감지와 병합



## 변경 감지와 병합



### 변경 감지 또는 merge를 통하여 엔티티 변경

- setter를 통하여 변경 할 경우 변경 될 떄 update 쿼리가 나간다.

- Id를 가지고 있을 경우 준영속 엔티티 이므로 병합을 해야한다.(준영속 상태를 영속상태로 변경함 em.merge의 반환이 영속)





### 준영속 상태의 상태를 변경하는 방법

- merge

  - Id를 새로운 객체에 지정해주고 em.merge를 통해 병합한다.

  - null이 있을경우 null으로 업데이트 돼 정보가 삭제 될 수 있다.

    

- 변경감지 기능 사용

  - Em.find를 통하여 객체를 가져와서 사용한다.
  - 권장하는 방법